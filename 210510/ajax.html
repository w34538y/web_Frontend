<html>
    <head>
        <title>ajax http 통신</title>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
        <style>
            #memo {
                padding: 20x;
                width: 200px;
                height: 100px;
                box-sizing: border-box;
                background-color: blanchedalmond;
                font-size: 20px;
            }
        </style>
    </head>
    <body>
        <button class="request">데이터 요청하기</button>
        <div id="memo"></div>
        <script>
            // ajax
            /*
            $.ajax({
                url:"", //클라이언트에서 http 요청을 보낼 서버의 url(주소)
                data: {key: value}, //http 요청과 함께 보낼 데이터
                method: "GET", // http 요청 메소드 종류 (get, post) 
                data:"json", //  서버에서 응답으로 보내줄 데이터의 타입
                success: function(data){ // http 통신이 성공적으로 이루어졌을때 실행되는 함수. 매개변수로 응답(response)데이터가 넘어온다 
                    
                },
                error: function(err){ // http통신에 실패했을때 실행되는 함수. 매개변수로 해당 에러에 대한 정보를 담은 객체가 넘어온다.
                    
                }
                
            });
            */
            
            // 특정 이름을 요청과 함께 보내면 그 이름이 가진 주 성별을 조회하는 API
            // https://api.genderize.io
            // {name: 값}
            
            // http 통신의 주요 method 
            // POST : 서버에 내용을 입력할 때 사용. 요청과 함께 보내는 데이터가 url에 표시되지 않는다. 
            // GET : 서버가 가진 데이터 및 정보를 조회할 때 사용. 요청과 함께 보내는 데이터가 url에 표시 된다. 
            // PUT : POST와 유사한 작동. 내용을 갱신할 때 사용한다. (데이터 수정)
            // DELETE : 리소스를 제거할 때 사용한다. (데이터 삭제)
            $(".request").click(function(){
               $.ajax({
                   url: "https://api.genderize.io",
                   data: {name : "henry" },
                   method: "GET",
                   dataType: "json",
                   success : function(data){
                       console.log("response data ", data);
                       console.log("gender ", data.gender);
                       console.log("count ", data.count);
                       console.log("probability ", data.probability);
                       
                       $("#memo").text(data.name + " >> " + data.gender);
                   },
                   error : function(err){
                       console.log("error data ", err);
                       alert("server error, please try again");
                   }
               }); 
            });
        </script>
    </body>
</html>